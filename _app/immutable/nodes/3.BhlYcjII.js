import"../chunks/DsnmJJEf.js";import{au as Ve,av as Oe,e as ze,aw as De,o as Le,I as P,ax as Ye,ab as Ge,ay as x,az as Je,ac as w,ad as _,T as l,ae as h,af as Ae,ah as c,ag as d,ai as v,aA as Re,aj as Fe,ak as k}from"../chunks/DZJAEf48.js";import{e as Te,s as g}from"../chunks/D96L-U5p.js";import{i as $}from"../chunks/yvTtJ5RL.js";import{s as oe,r as M}from"../chunks/CcMn7vyQ.js";function S(e,a,r=a){var s=Ve(),u=new WeakSet;Oe(e,"input",o=>{var i=o?e.defaultValue:e.value;if(i=Z(e)?ee(i):i,r(i),P!==null&&u.add(P),s&&i!==(i=a())){var m=e.selectionStart,p=e.selectionEnd;e.value=i??"",p!==null&&(e.selectionStart=m,e.selectionEnd=Math.min(p,e.value.length))}}),(Le&&e.defaultValue!==e.value||ze(a)==null&&e.value)&&(r(Z(e)?ee(e.value):e.value),P!==null&&u.add(P)),De(()=>{var o=a();if(e===document.activeElement){var i=Ye??P;if(u.has(i))return}Z(e)&&o===ee(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Z(e){var a=e.type;return a==="number"||a==="range"}function ee(e){return e===""?null:+e}var re;function ce(e){return{lang:e?.lang??re?.lang,message:e?.message,abortEarly:e?.abortEarly??re?.abortEarly,abortPipeEarly:e?.abortPipeEarly??re?.abortPipeEarly}}var We;function Xe(e){return We?.get(e)}var Be;function He(e){return Be?.get(e)}var Ke;function Qe(e,a){return Ke?.get(e)?.get(a)}function ae(e){const a=typeof e;return a==="string"?`"${e}"`:a==="number"||a==="bigint"||a==="boolean"?`${e}`:a==="object"||a==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":a}function E(e,a,r,s,u){const o=u&&"input"in u?u.input:r.value,i=u?.expected??e.expects??null,m=u?.received??ae(o),p={kind:e.kind,type:e.type,input:o,expected:i,received:m,message:`Invalid ${a}: ${i?`Expected ${i} but r`:"R"}eceived ${m}`,requirement:e.requirement,path:u?.path,issues:u?.issues,lang:s.lang,abortEarly:s.abortEarly,abortPipeEarly:s.abortPipeEarly},f=e.kind==="schema",y=u?.message??e.message??Qe(e.reference,p.lang)??(f?He(p.lang):null)??s.message??Xe(p.lang);y!==void 0&&(p.message=typeof y=="function"?y(p):y),f&&(r.typed=!1),r.issues?r.issues.push(p):r.issues=[p]}function I(e){return{version:1,vendor:"valibot",validate(a){return e["~run"]({value:a},ce())}}}var Ue=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu;function de(e){return{kind:"validation",type:"email",reference:de,expects:null,async:!1,requirement:Ue,message:e,"~run"(a,r){return a.typed&&!this.requirement.test(a.value)&&E(this,"email",a,r),a}}}function te(e,a){return{kind:"validation",type:"min_length",reference:te,async:!1,expects:`>=${e}`,requirement:e,message:a,"~run"(r,s){return r.typed&&r.value.length<this.requirement&&E(this,"length",r,s,{received:`${r.value.length}`}),r}}}function ve(e,a){return{kind:"validation",type:"min_value",reference:ve,async:!1,expects:`>=${e instanceof Date?e.toJSON():ae(e)}`,requirement:e,message:a,"~run"(r,s){return r.typed&&!(r.value>=this.requirement)&&E(this,"value",r,s,{received:r.value instanceof Date?r.value.toJSON():ae(r.value)}),r}}}function q(e,a){return{kind:"validation",type:"regex",reference:q,async:!1,expects:`${e}`,requirement:e,message:a,"~run"(r,s){return r.typed&&!this.requirement.test(r.value)&&E(this,"format",r,s),r}}}function Ze(e,a,r){return typeof e.fallback=="function"?e.fallback(a,r):e.fallback}function er(e,a,r){return typeof e.default=="function"?e.default(a,r):e.default}function fe(e){return{kind:"schema",type:"number",reference:fe,expects:"number",async:!1,message:e,get"~standard"(){return I(this)},"~run"(a,r){return typeof a.value=="number"&&!isNaN(a.value)?a.typed=!0:E(this,"type",a,r),a}}}function pe(e,a){return{kind:"schema",type:"object",reference:pe,expects:"Object",async:!1,entries:e,message:a,get"~standard"(){return I(this)},"~run"(r,s){const u=r.value;if(u&&typeof u=="object"){r.typed=!0,r.value={};for(const o in this.entries){const i=this.entries[o];if(o in u||(i.type==="exact_optional"||i.type==="optional"||i.type==="nullish")&&i.default!==void 0){const m=o in u?u[o]:er(i),p=i["~run"]({value:m},s);if(p.issues){const f={type:"object",origin:"value",input:u,key:o,value:m};for(const y of p.issues)y.path?y.path.unshift(f):y.path=[f],r.issues?.push(y);if(r.issues||(r.issues=p.issues),s.abortEarly){r.typed=!1;break}}p.typed||(r.typed=!1),r.value[o]=p.value}else if(i.fallback!==void 0)r.value[o]=Ze(i);else if(i.type!=="exact_optional"&&i.type!=="optional"&&i.type!=="nullish"&&(E(this,"key",r,s,{input:void 0,expected:`"${o}"`,path:[{type:"object",origin:"key",input:u,key:o,value:u[o]}]}),s.abortEarly))break}}else E(this,"type",r,s);return r}}}function C(e){return{kind:"schema",type:"string",reference:C,expects:"string",async:!1,message:e,get"~standard"(){return I(this)},"~run"(a,r){return typeof a.value=="string"?a.typed=!0:E(this,"type",a,r),a}}}function N(...e){return{...e[0],pipe:e,get"~standard"(){return I(this)},"~run"(a,r){for(const s of e)if(s.kind!=="metadata"){if(a.issues&&(s.kind==="schema"||s.kind==="transformation")){a.typed=!1;break}(!a.issues||!r.abortEarly&&!r.abortPipeEarly)&&(a=s["~run"](a,r))}return a}}}function rr(e,a,r){const s=e["~run"]({value:a},ce(r));return{typed:s.typed,success:!s.issues,output:s.value,issues:s.issues}}var ar=w('<p class="text-red-400 text-xs"> </p>'),tr=w('<p class="text-red-400 text-xs"> </p>'),sr=w('<p class="text-red-400 text-xs"> </p>'),nr=w('<p class="text-red-400 text-xs"> </p>'),ir=w('<p class="text-red-400 text-xs"> </p>'),lr=w('<p class="text-red-400 text-xs"> </p>'),ur=w('<p class="text-red-400 text-xs"> </p>'),or=w('<div class="max-w-lg mx-auto p-6 space-y-6 bg-gray-900 text-gray-100 rounded-lg shadow-lg"><div class="flex gap-4 items-center border border-gray-700 rounded-lg p-4 bg-gray-800"><img class="w-24 h-24 object-cover rounded"/> <div class="flex-1 space-y-1"><div class="font-semibold text-lg"> </div> <div><span class="text-red-400 font-bold text-lg"> </span> <span class="text-gray-400 line-through ml-2"> </span></div></div></div> <form class="space-y-5"><div><label for="name" class="block text-sm mb-1">お名前</label> <input id="name" type="text" class="w-full p-2 rounded bg-gray-800 border border-gray-700 focus:border-blue-500 focus:outline-none"/> <!></div> <div><label for="email" class="block text-sm mb-1">メールアドレス</label> <input id="email" type="email" class="w-full p-2 rounded bg-gray-800 border border-gray-700 focus:border-blue-500 focus:outline-none"/> <!></div> <div><label for="address" class="block text-sm mb-1">配送先住所</label> <textarea id="address" class="w-full p-2 rounded bg-gray-800 border border-gray-700 focus:border-blue-500 focus:outline-none"></textarea> <!></div> <div><label for="quantity" class="block text-sm mb-1">数量</label> <input id="quantity" type="number" min="1" class="w-24 p-2 rounded bg-gray-800 border border-gray-700 focus:border-blue-500 focus:outline-none"/> <!></div> <div><label for="cardNumber" class="block text-sm mb-1">カード番号</label> <input id="cardNumber" type="text" inputmode="numeric" placeholder="1234 5678 9012 3456" class="w-full p-2 rounded bg-gray-800 border border-gray-700 focus:border-blue-500 focus:outline-none"/> <!></div> <div class="flex gap-4"><div class="flex-1"><label for="cardExpiry" class="block text-sm mb-1">有効期限</label> <input id="cardExpiry" type="text" placeholder="MM/YY" class="w-full p-2 rounded bg-gray-800 border border-gray-700 focus:border-blue-500 focus:outline-none"/> <!></div> <div class="w-24"><label for="cardCvc" class="block text-sm mb-1">CVC</label> <input id="cardCvc" type="text" inputmode="numeric" class="w-full p-2 rounded bg-gray-800 border border-gray-700 focus:border-blue-500 focus:outline-none"/> <!></div></div> <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg shadow transition">注文を確定する</button></form></div>');function br(e,a){Ge(a,!0);let r=x(""),s=x(""),u=x(""),o=x(1),i=x(""),m=x(""),p=x(""),f=x(Je({}));const y=pe({name:N(C(),te(1,"お名前を入力してください")),email:N(C(),de("正しいメールアドレスを入力してください")),address:N(C(),te(5,"住所を5文字以上で入力してください")),quantity:N(fe(),ve(1,"数量は1以上で入力してください")),cardNumber:N(C(),q(/^[0-9]{13,19}$/,"カード番号は13〜19桁の数字で入力してください")),cardExpiry:N(C(),q(/^(0[1-9]|1[0-2])\/[0-9]{2}$/,"有効期限はMM/YY形式で入力してください")),cardCvc:N(C(),q(/^[0-9]{3,4}$/,"CVCは3〜4桁の数字で入力してください"))});function be(){k(f,{},!0);const t=rr(y,{name:l(r),email:l(s),address:l(u),quantity:Number(l(o)),cardNumber:l(i).replace(/\s+/g,""),cardExpiry:l(m),cardCvc:l(p)});if(!t.success){for(const n of t.issues){const b=n.path?.[0];typeof b=="string"&&(l(f)[b]=n.message)}return}alert("注文を受け付けました！")}const j={name:"ねんどろいど おんJシリーズ 束音ロゼ（再販）",price:5800,discount:10,mainImage:"https://i.imgur.com/VSyr9Ni.png"},me=Math.round(j.price*(1-j.discount/100));var V=or(),O=d(V),z=d(O),se=c(z,2),D=d(se),ye=d(D,!0);v(D);var ne=c(D,2),L=d(ne),ge=d(L);v(L);var ie=c(L,2),xe=d(ie);v(ie),v(ne),v(se),v(O);var Y=c(O,2),G=d(Y),J=c(d(G),2);M(J);var _e=c(J,2);{var he=t=>{var n=ar(),b=d(n,!0);v(n),_(()=>g(b,l(f).name)),h(t,n)};$(_e,t=>{l(f).name&&t(he)})}v(G);var A=c(G,2),R=c(d(A),2);M(R);var ke=c(R,2);{var Ee=t=>{var n=tr(),b=d(n,!0);v(n),_(()=>g(b,l(f).email)),h(t,n)};$(ke,t=>{l(f).email&&t(Ee)})}v(A);var F=c(A,2),T=c(d(F),2);Re(T);var we=c(T,2);{var $e=t=>{var n=sr(),b=d(n,!0);v(n),_(()=>g(b,l(f).address)),h(t,n)};$(we,t=>{l(f).address&&t($e)})}v(F);var W=c(F,2),X=c(d(W),2);M(X);var Se=c(X,2);{var Ne=t=>{var n=nr(),b=d(n,!0);v(n),_(()=>g(b,l(f).quantity)),h(t,n)};$(Se,t=>{l(f).quantity&&t(Ne)})}v(W);var B=c(W,2),H=c(d(B),2);M(H);var Ce=c(H,2);{var je=t=>{var n=ir(),b=d(n,!0);v(n),_(()=>g(b,l(f).cardNumber)),h(t,n)};$(Ce,t=>{l(f).cardNumber&&t(je)})}v(B);var le=c(B,2),K=d(le),Q=c(d(K),2);M(Q);var Me=c(Q,2);{var Pe=t=>{var n=lr(),b=d(n,!0);v(n),_(()=>g(b,l(f).cardExpiry)),h(t,n)};$(Me,t=>{l(f).cardExpiry&&t(Pe)})}v(K);var ue=c(K,2),U=c(d(ue),2);M(U);var qe=c(U,2);{var Ie=t=>{var n=ur(),b=d(n,!0);v(n),_(()=>g(b,l(f).cardCvc)),h(t,n)};$(qe,t=>{l(f).cardCvc&&t(Ie)})}v(ue),v(le),Fe(2),v(Y),v(V),_((t,n)=>{oe(z,"src",j.mainImage),oe(z,"alt",j.name),g(ye,j.name),g(ge,`¥${t??""}`),g(xe,`¥${n??""}`)},[()=>me.toLocaleString(),()=>j.price.toLocaleString()]),Te("submit",Y,be),S(J,()=>l(r),t=>k(r,t)),S(R,()=>l(s),t=>k(s,t)),S(T,()=>l(u),t=>k(u,t)),S(X,()=>l(o),t=>k(o,t)),S(H,()=>l(i),t=>k(i,t)),S(Q,()=>l(m),t=>k(m,t)),S(U,()=>l(p),t=>k(p,t)),h(e,V),Ae()}export{br as component};
